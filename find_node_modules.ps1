# Function to recursively search for and delete node_modules folders
function DeleteNodeModules($folderPath) {
    # Get all directories in the current folder
    $directories = Get-ChildItem -Path $folderPath -Directory

    # Loop through each directory
    foreach ($dir in $directories) {
        # Check if the directory is named "node_modules"
        if ($dir.Name -eq "node_modules") {
            # Delete the node_modules folder and its contents
            Remove-Item -Path $dir.FullName -Recurse -Force
            Write-Host "Deleted node_modules folder at: $($dir.FullName)"
        }
        else {
            # If not, recursively search within this directory
            DeleteNodeModules $dir.FullName
        }
    }
}

# Check if a starting folder path argument was provided, use current directory if not
if ($args.Count -gt 0) {
    $startingFolderPath = $args[0]
} else {
    $startingFolderPath = $pwd.Path
}

# Call the function to search for and delete node_modules folders
DeleteNodeModules $startingFolderPath
